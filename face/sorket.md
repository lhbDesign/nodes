## webSocket

### 特点

1. 与 http 协议有良好的兼容性；
2. 建立在 TCP 协议之上，和 http 协议同属于应用层；
3. 数据格式比较轻量，性能开销小，通信高效；
4. 可以发送文本，也可以发送二进制；
5. 没有同源限制，可以与任意服务器通信。

### 心跳检测

在长连接下，有可能很长一段时间都没有数据往来。理论上说，这个连接是一直保持连接的，但是实际情况中，如果中间节点出现什么故障是难以知道的。更要命的是，有的节点(防火墙)会自动把一定时间之内没有数据交互的连接给断掉。在这个时候，就需要我们的心跳包了，用于维持长连接，保活。

### 心跳检测步骤

1. 客户端每隔一个时间间隔发生一个探测包给服务器
2. 客户端发包时启动一个超时定时器
3. 服务器端接收到检测包，应该回应一个包
4. 如果客户机收到服务器的应答包，则说明服务器正常，删除超时定时器
5. 如果客户端的超时定时器超时，依然没有收到应答包，则说明服务器挂了