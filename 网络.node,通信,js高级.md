# 网络

## 网络类型

### 局域网

- 概念: LAN(Local Area Network),是指在某一区域,由多台计算机互联组成的机组,可以实现打印机共享,文件共享等功能
- 是一个相对概念,如在学校教师内部的共享网络是局域网,那么学校的edu网络对于教室来说就是广域网,学校外面的公网对于学校的edu和教室网络来说是广域网

### 广域网

- 概念: WAN(Wide Area Network),是一种跨域大的计算机网络集合

### 上网类型

- 拨号上网 速度<56kbps
  - 早期使用调制解调器硬件上网的方式 也就是电话线

- ISDN 速度<56kbps
  - 即窄带综合业务数字网，俗称“一线通”，它也是利用现有电话线来访问Internet的。
- ADSL 带宽1000M 下载速度 10MB
  - 一种在普通电话线上高速传输数据的技术，它使用了电话线中一直没有被使用过的频率，所以可以突破调制解调器的56kbps速度的极限。ADSL宽带上网的优点是采用星型结构、保密性好、安全系数高、速度快以及价格低；缺点是不能传输模拟信号。
- 光纤上网 带宽>10000M 下载速度>1G
  - 采用光纤线取代铜芯电话线，通过光纤收发器、路由器和交换机接入Internet中。光纤上网的优点是带宽独享、性能稳定、升级改造费用低、不受电磁干扰、损耗小、安全和保密性强以及传输距离长。
- 无线上网
  - 不需要通过电话线或网络线，而是通过通信信号来连接到Internet。只要用户所处的地点在无线接入口的无线电波覆盖范围内，再配上一张兼容的无线网卡就可以轻松上网了。
- 路由器
  - 一般路由器不支持千兆,价格高的路由器会支持千兆,分为单千兆,双千兆,多千兆,区别就在于出口有多少个输出的千兆网接口.
  - 千兆网络路由器有衰变期,一般衰变期是三年
- 无盘工作站
  - 只要计算机使用网络,即可使用同一个系统,不需要计算机中安装硬盘,操作系统等,如同网吧的环境一样,现在的云服务器就是这个道理

### OSI参考模型

- 该体系结构标准定义了网络互连的七层框架,从底到顶依次是:

  物理层--->链路层--->网络层--->传输层--->会话层--->表示层--->应用层

## 网址

## 

### ip

- 概念:
  - IP地址是指互联网协议地址。IP地址是IP协议提供的一种统一的地址格式，它为互联网上的每一个网络和每一台主机分配一个逻辑地址，以此来屏蔽物理地址的差异。Internet上的每台主机(Host)都有一个唯一的IP地址。IP协议就是使用这个地址在主机之间传递信息，这是Internet 能够运行的基础。IP地址的长度为32位(共有2^32个IP地址)，分为4段，每段8位，用十进制数字表示，每段数字范围为0～255，段与段之间用句点隔开。
  - **命令行查看ip地址  $ ipconfig 查看IP,$ ping ip地址 , 查看与这个ip地址是否在同一局域网下**

- IPv4
  - IPV4就是有4段数字，采用32字节,每一段最大不超过255。由于互联网的蓬勃发展，IP位址的需求量愈来愈大，使得IP位址的发放愈趋严格，各项资料显示全球IPv4位址可能在2005至2010年间全部发完
- IPv6
  - 地址空间的不足必将妨碍互联网的进一步发展。为了扩大地址空间，拟通过IPv6重新定义地址空间。IPv6采用128位地址长度。在IPv6的设计过程中除了一劳永逸地解决了地址短缺问题以外，还考虑了在IPv4中解决不好的其它问题。
- 子网掩码
  - 又叫网络掩码、地址掩码、子网络遮罩，它是一种用来指明一个IP地址的哪些位标识的是主机所在的子网，以及哪些位标识的是主机的位掩码。子网掩码不能单独存在，它必须结合IP地址一起使用。子网掩码只有一个作用，就是将某个IP地址划分成网络地址和主机地址两部分。
- 默认网关
  - 一个用于 TCP/IP 协议的配置项，是一个可直接到达的 IP 路由器的 IP 地址。配置默认网关可以在 IP 路由表中创建一个默认路径。 一台主机可以有多个网关。默认网关的意思是一台主机如果找不到可用的网关，就把数据包发给默认指定的网关，由这个网关来处理数据包。

### 端口

- Port

  - 可以认为是计算机与外界通讯交流的出口。网络中面向连接服务和无连接服务的通信协议端口，是一种抽象的软件结构，包括一些数据结构和I/O（基本输入输出）缓冲区

  - 面向连接服务TCP协议和无连接服务UDP协议使用16bits端口号来表示和区别网络中的不同应用程序，网络层协议IP使用特定的协议号（TCP 6，UDP 17）来表示和区别传输层协议。

  - 常用的保留TCP端口号有：

    HTTP 80，FTP 20/21，Telnet 23，SMTP 25，DNS 53等。

  - 常用的保留UDP端口号有：

    DNS 53，BootP 67（server）/ 68（client），TFTP 69，SNMP 161等。

### 域名

> 是由一串用点分隔的名字组成的Internet上某一台计算机或计算机组的名称，用于在数据传输时标识计算机的电子方位（有时也指地理位置）网域名称系统（DNS，Domain Name System，有时也简称为域名）是因特网的一项核心服务，它作为可以将域名和IP地址相互映射的一个分布式数据库，能够使人更方便的访问互联网，而不用去记住能够被机器直接读取的IP地址数串。

- hosts

  - 文件目录: C:\Windows\System32\drivers\etc
  - 可以用记事本等工具打开，其作用就是将一些常用的网址域名与其对应的IP地址建立一个关联“数据库”，当用户在浏览器中输入一个需要登录的网址时，系统会首先自动从Hosts文件中寻找对应的IP地址，一旦找到，系统会立即打开对应网页，如果没有找到，则系统会再将网址提交DNS域名解析服务器进行IP地址的解析。

- VPN

  - 实际上就是一种加密技术
  - 即翻墙，在公用网络上建立专用网络，进行加密通讯。在企业网络中有广泛应用。VPN网关通过对数据包的加密和数据包目标地址的转换实现远程访问。VPN有多种分类方式，主要是按协议进行分类。VPN可通过服务器、硬件、软件等多种方式实现。

- CDN

  - CDN的全称是Content Delivery Network，即内容分发网络。
  - 其基本思路是尽可能避开互联网上有可能影响数据传输速度和稳定性的瓶颈和环节，使内容传输的更快、更稳定。通过在网络各处放置节点服务器所构成的在现有的互联网基础之上的一层智能虚拟网络，CDN系统能够实时地根据网络流量和各节点的连接、负载状况以及到用户的距离和响应时间等综合信息将用户的请求重新导向离用户最近的服务节点上。其目的是使用户可就近取得所需内容，解决 Internet网络拥挤的状况，提高用户访问网站的响应速度。

- **域名访问程序:**

  域名没有地址,在输入域名的时候首先去访问域名解析系统,也就是 DNS, 进行域名解析,解析成对应的IP,然后找到这个ip,访问服务器. 顺序 ----> 首先访问 host(本地域名解析系统)--->DNS服务器--->服务器

  先到本地 host中查找 有的话使用这个链接, 没有的话会去本机设置的 DNS服务器中查找, 找到的话使用这个网页,没有找到的话报错

## 协议

> 网络协议为计算机网络中进行数据交换而建立的规则、标准或约定的集合。

- TCP/IP 协议
  - 作为互联网的基础协议，没有它就根本不可能上网，任何和互联网有关的操作都离不开TCP/IP协议。不过TCP/IP协议也是这三大协议中配置起来最麻烦的一个，单机上网还好，而通过局域网访问互联网的话，就要详细设置IP地址，网关，子网掩码，DNS服务器等参数。
  - **IP 属于网络层协议,因为ip涉及到硬件重定位**
  - **TCP 属于传输层协议,如 H5 浏览器都属于TCP协议**
  
- 物理层协议
  
  - 以太网 ，调制解调器 ，光纤
  
- 数据链路层
  
- Wi-Fi(IEEE 802.11) · WiMAX(IEEE 802.16) ·ATM
  
- 网络层协议
  
  - IP (IPv4 · IPv6)
  
- 传输层协议
  - TCP
    - TCP是面向连接的通信协议，通过三次握手(四次挥手)建立连接，通讯完成时要拆除连接，由于TCP是面向连接的所以只能用于端到端的通讯。
  
  - UDP
    - UDP是面向无连接的通讯协议，UDP数据包括目的端口号和源端口号信息，由于通讯不需要连接，所以可以实现广播发送。
    - 常用的如QQ

### 三次握手

- 1. 第一次握手

     客户端给服务器发送一个SYN段,该段中也包含客户端的初始序列号

     > SYN 是同步的缩写, SYN段是发送到另一台极端及的 TCP数据包,请求在它们之间建立连接

  2. 第二次握手

     服务器返回客户端 SYN + ACK段,该段中包含服务器的初始序列号

     > ACK 是"确认"的缩写,ACK数据包是任何确认收到一条消息或一系列数据包的TCP数据包

  3. 第三次握手

     客户端给服务器响应一个ACK段,表示确认已收到服务器的SYN段

- 应用层协议
  - FTP
    - 是文件传输协议，一般上传下载用FTP服务，数据端口是20H，控制端口是21H。
  - DNS
    - Domain Name System，域名解析系统
    - 万维网上作为域名和IP地址相互映射的一个分布式数据库，能够使用户更方便的访问互联网，而不用去记住能够被机器直接读取的IP数串。通过域名，最终得到该域名对应的IP地址的过程叫做域名解析（或主机名解析）。DNS协议运行在UDP协议之上，使用端口号53。
  - HTTP/HTTPS
    - 是超文本传输协议，用于实现互联网中的WWW服务，HTTP使用端口80,HTTPS使用端口443.
    - 两者都是超文本传输协议,只能打开 htm 和 html 类型文件, 这两个是文件的后缀,就算没有这个后缀,但是文本中的声明类型处声明了 doctype 为HTML 格式 也能打开.
    - 　HTTPS和HTTP的区别主要如下：
      - 1、https协议需要到ca申请证书，一般免费证书较少，因而需要一定费用。
      - 2、http是超文本传输协议，信息是明文传输，https则是具有安全性的ssl加密传输协议。
      - 3、http的连接很简单，是无状态的；HTTPS协议是由SSL(安全套接字协议)+HTTP协议构建的可进行加密传输、身份认证的网络协议，比http协议安全。
  - SMTP
    - 是简单邮件传输协议，用来控制信件的发送、中转，使用端口25。
  - POP3 
    - 是简单邮件传输协议，用来控制信件的接收

## 环境变量

- 设置位置:

  我的电脑--->属性--->高级系统设置--->环境变量--->系统变量(用户变量)--->path

  系统变量是所有登录用户共享的,用户变量仅局限于当前用户.

  win7系统 点击path 编辑,在变量值后面直接加对应程序路径,和前面的用 % 隔开

  win10系统 点击path 编辑,新建,直接添加路径即可

  环境变量配置完毕以后,可以直接在命令行输入对应程序名称即可打开对应软件,如 qq 就输入QQ, VS code 输入 code

进程,线程

- 通过wifi和蓝牙可以在物理空间定位  新技术: 短距投影, VR 虚拟现实技术, AR 增强现实技术, 脑机接口, 物联网医疗

- 服务器荷载过多时候,采取: **多线程--->多进程--->分布式--->集群**

  <font color=red>一个人进程代表着一个程序,进程描述了 CPU 在**运行指令及加载和保存上下文所需的时间**,线程是进程中更小的单位,描述执行一段指令所需要的时间</font>

- 多cpu的时候,进程之间如何进行切换? 使用的是轮询切换

  多线程就是在某一个程序的内部有多个执行路径,就像一个浏览器开了多个窗口,做了很多个不同的事情.

  多进程就是多个应用程序解决高并发的问题,如一个服务器集群中分布多个服务器站,每一个服务器站中有N个电脑资源,这些电脑资源就是相应的线程. 每一个电脑中有N个应用程序.
  
- 浏览器中的进程和线程

  当打开一个 Tab 页时，其实就是创建了一个进程，一个进程中可以有多个线程，比如渲染线程、JS 引擎线程、HTTP 请求线程等等。当你发起一个请求时，其实就是创建了一个线程，当请求结束后，该线程可能就会被销毁。

# node

## 创建服务器

- 语法: http = require('http') 在js文件中

```javascript
var http = require('http')
// createServer 创建服务 req 请求, res 响应
// 消息分为两个部分,消息头和消息体 也就会有 请求头请求体,响应头,响应体
http.createServer(function(req,res){
	res.write('你好') //写入响应消息,可以写入多个
    res.write('你好2')
    res.setHeader('Content-Type','text/html;charset=utf-8') // 设置响应头 用这个和下面的是一样的效果, 但这个写法一次只能设置一个头消息, set这种必须写在 writeHead上面
    res.writeHead(200,{'Content-Type':'text/html;charset=utf-8'}) // 写入响应头消息 , 可以设置很多头消息,并且包含了返回状态码
    res.end()//结束发送 也可以在 end('字符串') 在这里写内容,前面没有其他响应,直接end也可以
}).listen(4000,'localhost',function(){
    // 创建的服务有一个listen方法, 第一个参数是端口号,第二个参数是域名,第三个参数是服务创建成功后自动执行的函数, 如果写 ip 或 域名,只能用对应的ip或域名访问, 不写的话,使用ip或域名都可以访问
})
```

## node中的 Event Loop

> Node 的 Event Loop 分为 6 个阶段，它们会按照**顺序**反复运行。每当进入某一个阶段的时候，都会从对应的回调队列中取出函数去执行。当队列为空或者执行的回调函数数量到达系统设定的阈值，就会进入下一阶段。

![node事件](图片引入路径/node事件.jpg)

- timer
  - timer阶段会执行 setTimeout 和 setInterval 回调函数,并且是由 poll 阶段控制,同样在node中 定时器的指定时间也是不准确的,只能尽快执行
- I/O
  - I/O 阶段会处理一些上一轮循环中的少数未执行的I/O回调

- idle,prepare
  - idle,prepare 阶段内部实现
- poll
  - 这个阶段系统会做两件事情
    1. 回到timer 阶段执行回调
    2. 执行 I/O 回调
  - 在进入该阶段的时候没有设定timer的话,会发生以下两件事
    1. 如果poll队列不为空,会遍历回调队列,并同步执行,直到队列为空,或达到系统限制
    2. 如果poll队列为空,会发生两件事
       - 如果有setImmediate 回调需要执行,poll阶段会停止并且进入到check阶段执行回调
       - 如果没有setImmerdiate 回调需要执行,会等待回调被加入到队列中并且立即执行回调,这里同样会有个超时时间设置,防止一直等待
  - 如果设定了timer的,且poll队列为空,则会判断是否有timer超时,如果有的话会回到timer阶段执行回调
- check
  - check阶段执行 setImmerdiate
- close callbacks
  - close callbacks 执行close事件

# 面向对象

- 严格模式中,箭头函数中的this指向外层环境变量中的this,上层的是 window,外层就是window, 直接调用的函数,是指向 undefined

- 使用 Object.create(参数),创建的对象, 对象中的原型中拥有这个参数(对象)的属性和方法

- 原型链: 链条式的继承关系

- 顶级原型上的方法

  - constructor方法 \*.constructor 查找属于\* 的构造函数
  - hasOwnProperty  对象.hasOwnProperty(参数)  判断这个参数属性是否是对象属性,得到布尔值,原型链属性不会判断,只找自身拥有的对象属性,是的时候返回 true
  - isPrototypeOf 对象1.isPrototypeOf(对象2) 判断对象1是不是对象2的原型链,返回布尔值, 原型链上有就可以
  - propertyIsEnumerable 对象.propertyIsEnumerable(属性) 判断对象中的这个属性是否可以枚举,找不到原型属性,只判断对象属性
  - toLocaleString()  将构造函数名称放在第二个值中 [object Object] 可以设置日期及数值写法,可以传入两个参数
  - toString()  数值中的 toString 方法是被重构了的,因为可以传入参数,对象的 toString方法不能传参
    - 需要隐式转换为字符串时,会自动调用该方法
  - valueOf()
    - 需要隐式转换为值时调用该方法
    - Number 的 valueOf() 方法被重构, 将字符串转换为数值

- 类的方法

  - Object类 

    - console.dir(Object) 得到的是 Object 的静态属性和方法 使用类名进行调用

      `Object.assign()` 浅复制

      `Object.defineProperty`(对象,属性,{参数}) 设置这个对象的属性,第三个参数是一个**描述对象**,里面说明了这个属性的具体属性值如 

      enumerable: 布尔值(是否可枚举) configurable: 布尔值(是否可以删除属性及修改描述对象) writable:布尔值(是否可修改属性值) value:1(这个属性的属性值,可以是函数) 当不写前面的描述对象时,所有属性值默认为 false(不可枚举,不可删除,不可修改)

      set和get函数(设置了set和get的时候就不能同时设置 writable和value)

      `Object.defineProerties`(对象1,对象2) 对象1是原对象, 对象2是设置对象1的属性 对象2中{属性{描述对象},属性{描述对象},...} 

      `Object.getOwnPropertyNames`(对象) 获取这个对象中所有属性名,转换为数组 可以获取到所有的属性(包括不可枚举,不包括Symbol)

      `Object.getOwnPropertySymbols`(对象) 获取这个对象中所有 Symbol 属性名组成的数组

      `Object.keys`(对象) 获取这个对象中所有属性名组成的数组,只能获取可枚举得

      `Object.getOwnPropertyDescriptor`(对象,属性名) 获取这个对象中对应属性的描述对象

      `Object.getOwnPropertyDescriptors`(对象) 获取这个对象中所有字符串属性(不包括Symbol)的描述对象

      `Object.freeze`(对象)  冻结这个对象, 使这个对象无法改变, 不能删除.不能修改.不能扩展. 无法解冻,可以使用复制,修改复制以后的对象

      `Object.isFrozen(对象)` 判断对象是否被冻结,返回布尔值

      `Object.seal(对象)` 是这个对象和对象内的属性 不能删除,不能扩展,可以修改

      `Object.entries`(对象) 将对象变为迭代对象 可以使用在map中 m=new Map(`Object.entries`(对象)) 生成一个map对象

      `Object.fromEntries`(迭代器) 将迭代器变为对象

      `Object.hasOwn`(对象,属性) 判断对象中是否有这个属性,只能判断对象属性,对数组来说只能判断下标

      `Object.is(参数1,参数2)` 判断两个值是否相等,和 === 的区别是 这个可以判断 NaN 和 NaN 是否相等

      `Object.getPrototypeOf(对象)` 获取对象的原型链 等同于 对象.\_\_proto\_\_

      `Object.setPrototypeOf(对象,新对象)` 设置对象的原型链为新对象 替换原来的原型链

- 深复制, lodash的深复制没有处理不可枚举属性

```javascript
var obj={a:1,b:2}
var o = Object.create(obj)
o.c = 10 // o 是一个有c属性的对象, 他的原型上有 a,b 属性
```

